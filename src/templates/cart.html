{% extends "layout.html" %}

{% block content %}

  <div class="container single-product-content bg-color-white pt-15px pb-20px">
      <div class="row">
          <div class="col-lg-12">

              <ul class="product-images-gallery">
                
                {% for cart in cart_list %}
                  <li class="cart-list-item">
                      <div class="d-flex item-detail">
                        <a href="{{ url_for('view.product', id=cart[1].id) }}">
                          <img src="{{ url_for('static', filename='assets/images/products/') }}{{ cart[2].image_url }}" 
                          alt="Product image" width="150" height="150">
                        </a>
                          <div class="single-product-des pt-0">
                              <h5 class="product-title pb-0">{{ cart[1].name }}</h5>
                              <div class="quantity d-flex m-0" style="align-items: center;">
                                  <input type="number" step="1" min="1" name="quantity" value="1" title="Qty" class="input-text qty text total-quantity" size="2">
                                  <div class="ml-15px mb-0 single-product-price"><span>₹</span> <strong id="product_price">{{ cart[1].price }}</strong></div>
                              </div>
                          </div>
                          <a href="{{ url_for('view.cart_remove',cart_id=cart[0].id) }}"><i class="fa fa-trash-alt fa-lg" style="color:red; size: 20px;" aria-hidden="true"></i></a>
                      </div>
                      <div class="separator-line"></div>
                  </li>

                {% endfor %}
                <li class="cart-list-item">
                  <div class="d-flex item-detail">
                    <h5 style="color: #637282;">Total : <span>₹</span> {{ total }}</h4>
                  </div>
                </li>

              </ul>
              <div class="separator-line"></div>
              <h5>Deliver to
                
                <select id="mySelect" onchange="myFunction()">
                  {% for add in address %}
                    <option value="" selected>Select an option</option>
                    <option value="{{ add.id }}">{{ add.address_name }}</option>
                  {% endfor %}
                </select>
      
    
              </h5>
                <ul class="list-group" style="width: 50%;">

                  <li class="list-group-item">
                    <strong id="demo"></strong>
                    <br><a href="{{ url_for('view.edit_address', address_id=address.id) }}" id="edit_stuff" style="visibility: hidden;">Edit address</a>
                    <br><a href="{{ url_for('view.delivery_address') }}">Add new address</a>
                  </li>
                </ul>
                <br>
                <h5>Payment Method</h5>
                <a href="">UPI</a><br>
                <a href="">debit/credit card</a><br>
                <a href="">Cash on delivery</a>

          </div>
          <div class="col-lg-12 text-right">
              <button class="btn btn-fill" onclick="window.location.href='{{ url_for('view.checkout') }}';">Checkout</button>
          </div>
      </div>
  </div>
  
  <script>

function myFunction() {
  var name = {{ data|safe }};
    
  var x = document.getElementById("mySelect").value;
    for (y in name) {
      if (name[y]['address_id'] == x) {
        console.log(name[y])
        document.getElementById("demo").innerHTML = 
          name[y]['first_name']+' '+name[y]['last_name']+"<br/>"+
          name[y]['email'] +"<br/>"+
          name[y]['phone_number'] +"<br/>"+
          name[y]['address']+' '+name[y]['city']+' '+name[y]['state']+' '+name[y]['postal_code']
        document.getElementById("edit_stuff").href = "/edit_address/"+ name[y]['address_id']
        document.getElementById("edit_stuff").style = "visibility: visible;"
      }
    }
  
}
</script>
{% endblock %}
